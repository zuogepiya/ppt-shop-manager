# 从零开始完整部署指南 - 所有步骤

本指南从零开始，一步步教你完成PPT店铺管理系统的部署，让系统可以公网访问。

**预计总时间**：30-45分钟（首次部署）

---

## 📋 目录

1. [准备工作](#1-准备工作)
2. [创建Supabase数据库](#2-创建supabase数据库)
3. [创建GitHub账号](#3-创建github账号)
4. [推送代码到GitHub](#4-推送代码到github)
5. [注册Vercel账号](#5-注册vercel账号)
6. [部署到Vercel](#6-部署到vercel)
7. [初始化数据库](#7-初始化数据库)
8. [测试系统](#8-测试系统)
9. [修改密码](#9-修改密码)
10. [分享给团队](#10-分享给团队)
11. [完成！](#11完成)

---

## 1. 准备工作

### 你需要准备什么？

**硬件**：
- ✅ 一台电脑（Windows、Mac、Linux都可以）
- ✅ 连接互联网

**账号**：
- ✅ 一个电子邮箱（QQ邮箱、163邮箱、Gmail等）
- ✅ 这个邮箱必须真实可用来接收验证邮件

**软件**：
- ✅ 一个现代浏览器（Chrome、Edge、Firefox等）
- ✅ 不需要安装任何编程软件！

**技能**：
- ✅ 不需要懂编程
- ✅ 不需要懂命令行
- ✅ 不需要懂技术

### 🎯 部署后你能得到什么？

✅ 一个公网可访问的网址：`https://你的项目名.vercel.app`
✅ 你的设计师、员工可以随时访问
✅ 完全免费，不需要购买服务器
✅ 自动加密（HTTPS），安全可靠

### 成本说明

**完全免费**：
- Vercel免费套餐：100GB带宽/月
- Supabase免费套餐：500MB存储 + 50K请求/月
- **总计：¥0/月** 🎉

---

## 2. 创建Supabase数据库

### 什么是Supabase？

Supabase是一个免费的数据库服务，就像一个"云端的Excel表格"，用于存储你的用户、订单、财务等数据。

### 📝 详细步骤

#### 第一步：访问Supabase网站

1. 打开浏览器（推荐使用Chrome）
2. 在地址栏输入：`https://supabase.com`
3. 按回车键进入网站

#### 第二步：注册账号

1. 点击页面上的 **"Start your project"** 按钮
2. 选择登录方式：
   - **Email邮箱登录**（推荐新手）
   - GitHub账号登录（如果你有GitHub账号）

**选择Email登录**：
1. 点击 **"Continue with Email"**
2. 输入你的邮箱地址
3. 输入密码（建议保存密码）
4. 点击 **"Sign Up"** 或 **"Continue"**
5. 检查你的邮箱，Supabase会发送一封验证邮件
6. 打开邮件，点击验证链接
7. 返回Supabase网站，登录你的账号

#### 第三步：创建新项目

1. 登录成功后，你会看到Dashboard（仪表板）
2. 点击页面上的 **"New Project"** 按钮（左上角或中间）
3. 填写项目信息：

| 字段 | 填写内容 | 说明 |
|------|----------|------|
| **Name** | `ppt-shop-manager` | 项目名称，可以自定义 |
| **Database Password** | ⚠️ 设置一个强密码 | **非常重要！务必记住这个密码！** |
| **Region** | 选择 **Northeast Asia (Tokyo)** | 选择离你最近的区域 |

**关于密码的说明**：
- 密码长度：至少8位
- 建议包含：大写字母 + 小写字母 + 数字
- 示例：`MyPptShop123` 或 `Admin@2024`
- ⚠️ **务必保存这个密码！以后会用到！**

4. 填写完成后，点击 **"Create new project"** 按钮
5. 项目创建需要 **1-2分钟**，请耐心等待
6. 创建成功后，页面会自动跳转到项目Dashboard

#### 第四步：获取数据库连接字符串

连接字符串是用来连接数据库的"钥匙"。

**方法一：通过Database设置（推荐）**

1. 在左侧菜单栏，找到并点击 **Settings** 图标（⚙️）
2. 在Settings菜单中，选择 **Database**
3. 向下滚动页面，找到 **Connection string** 部分
4. 你会看到多个标签页：**URI**、**Transaction pooling**、**Session pooling**
5. 点击选择 **URI** 标签
6. 你会看到一个类似这样的字符串：

```
postgresql://postgres.xxxxxxxxxxxxxx:[YOUR-PASSWORD]@aws-0-ap-northeast-1.pooler.supabase.com:6543/postgres
```

7. 点击旁边的 **Copy** 按钮复制这个字符串
8. 将字符串中的 `[YOUR-PASSWORD]` 替换为你刚才设置的密码

**替换示例**：
```
# 原始字符串
postgresql://postgres.abc123:[YOUR-PASSWORD]@aws-0-ap-northeast-1.pooler.supabase.com:6543/postgres

# 替换后
postgresql://postgres.abc123:MyPptShop123@aws-0-ap-northeast-1.pooler.supabase.com:6543/postgres
```

**方法二：手动构建（万能方法）**

如果找不到Connection string，可以手动构建：

1. 在浏览器地址栏中找到项目ID：
   - URL格式：`https://supabase.com/dashboard/project/这里就是项目ID`
   - 例如：`https://supabase.com/dashboard/project/abc123def456`
   - 项目ID：`abc123def456`

2. 使用以下模板构建连接字符串：

```
postgresql://postgres.项目ID:你的密码@aws-0-ap-northeast-1.pooler.supabase.com:6543/postgres
```

**示例**：
```
postgresql://postgres.abc123def456:MyPptShop123@aws-0-ap-northeast-1.pooler.supabase.com:6543/postgres
```

#### 第五步：保存连接字符串

**务必保存以下信息**：

| 信息项 | 示例 | 保存到 |
|------|------|--------|
| 数据库密码 | `MyPptShop123` | 记事本/密码管理器 |
| 完整连接字符串 | `postgresql://postgres...` | 记事本 |
| Supabase项目URL | `https://supabase.com/dashboard/project/xxx` | 记事本 |

⚠️ **非常重要**：数据库密码无法找回，务必保存！

---

## 3. 创建GitHub账号

### 什么是GitHub？

GitHub是一个代码托管平台，类似于"代码的网盘"。Vercel需要从GitHub获取你的代码来部署。

### 📝 详细步骤

#### 第一步：访问GitHub

1. 打开浏览器
2. 在地址栏输入：`https://github.com`
3. 按回车键进入GitHub

#### 第二步：注册账号

1. 点击右上角的 **"Sign up"** 按钮
2. 填写注册表单：
   - **Email address**：输入你的邮箱
   - **Password**：设置密码（建议8位以上）
   - **Username**：设置用户名（英文数字组合，如：zhangsan123）
3. 点击 **"Continue"**
4. GitHub会发送验证邮件到你的邮箱
5. 打开邮件，点击验证链接
6. 登录你的GitHub账号

#### 第三步：验证邮箱（如果提示）

1. 如果GitHub提示你验证邮箱
2. 打开邮箱找到GitHub的邮件
3. 点击邮件中的验证链接
4. 返回GitHub继续操作

#### 第四步：记住你的GitHub用户名

**重要！记下你的GitHub用户名**：
- 在页面右上角可以看到你的头像和用户名
- 或者在URL中查看：`github.com/这里就是你的用户名`

**示例**：
- 你的GitHub用户名是：`zhangsan`

---

## 4. 推送代码到GitHub

### 🎉 重要说明

**你现在在沙箱环境中，项目已经在这里了！**
我们只需要把代码上传到GitHub，不需要下载到本地电脑。

**不需要**：
- ❌ 下载项目到本地
- ❌ 找到项目文件夹
- ❌ 安装Git
- ❌ 打开Windows命令提示符

**只需要**：
- ✅ 在GitHub创建仓库
- ✅ 在这里（当前环境）执行2条命令

### 📝 详细步骤

#### 第一步：在GitHub创建新仓库

1. 访问：https://github.com/new
2. 填写仓库信息：

| 字段 | 填写内容 |
|------|----------|
| **Repository name** | `ppt-shop-manager` |
| **Description** | `PPT制作店铺员工管理系统`（可选） |
| **Public / Private** | 选择 **Private**（私有） |

3. 点击 **"Create repository"** 按钮
4. 创建成功后，会看到你的仓库页面

5. **重要！记下你的GitHub用户名**：
   - 在页面右上角可以看到你的用户名
   - 或者在URL中：`github.com/这里就是用户名/ppt-shop-manager`

**示例**：
- 用户名：`zhangsan`
- 仓库URL：`https://github.com/zhangsan/ppt-shop-manager`

#### 第二步：执行推送命令（在当前环境）

**回到当前页面（这里），执行以下2条命令**：

**命令1：添加远程仓库**

将 `YOUR_USERNAME` 替换为你的GitHub用户名！

```bash
git remote add origin https://github.com/YOUR_USERNAME/ppt-shop-manager.git
```

**示例**（如果用户名是zhangsan）：
```bash
git remote add origin https://github.com/zhangsan/ppt-shop-manager.git
```

---

**命令2：推送代码**

```bash
git push -u origin main
```

**说明**：
- 这个命令会将代码上传到GitHub
- 可能需要1-2分钟
- 会显示上传进度

**执行时可能遇到的情况**：

**情况A：直接成功** ✅
- 看到 `Branch 'main' set up to track remote branch 'main' from 'origin'.`
- 说明推送成功！

**情况B：提示"fatal: remote origin already exists"**
- 说明之前已经配置过远程仓库
- 执行以下命令：
  ```bash
  git remote remove origin
  git remote add origin https://github.com/YOUR_USERNAME/ppt-shop-manager.git
  git push -u origin main
  ```

**情况C：提示需要身份验证**
- 输入你的GitHub用户名
- 如果要求密码，输入GitHub密码或Personal Access Token

#### 第三步：验证上传成功

1. 刷新你的GitHub仓库页面
2. 你应该能看到项目文件列表
3. 看到以下文件就说明成功：

**你应该看到的文件**：
```
- package.json
- next.config.ts
- src/ (文件夹)
- README.md
- 新手完全指南.md
- 快速部署指南.md
- ...其他文件
```

**如果能看到这些文件**：✅ 恭喜你，推送成功！

---

## 5. 注册Vercel账号

### 什么是Vercel？

Vercel是一个免费的网站托管平台，专门用于运行Next.js项目。它会自动把你的代码部署到公网，并分配一个网址。

### 📝 详细步骤

#### 第一步：访问Vercel

1. 打开浏览器
2. 在地址栏输入：`https://vercel.com`
3. 按回车键进入Vercel

#### 第二步：注册账号

**推荐使用GitHub登录**（因为我们已经在第3步创建了GitHub账号）：

1. 点击页面上的 **"Sign Up"** 按钮
2. 在登录选项中，选择 **"Continue with GitHub"**
3. 会跳转到GitHub授权页面
4. 点击 **"Authorize Vercel"** 授权
5. Vercel会自动读取你的GitHub账号信息
6. 设置Vercel用户名（可以使用GitHub用户名）
7. 填写邮箱地址
8. 点击 **"Continue"**

**如果没有GitHub账号**：
- 可以选择使用邮箱注册
- 步骤类似，按照页面提示操作即可

#### 第三步：完成注册

1. Vercel会发送一封确认邮件到你的邮箱
2. 打开邮件，点击确认链接
3. 返回Vercel，登录你的账号
4. 你会看到Vercel的Dashboard（仪表板）

---

## 6. 部署到Vercel

### 这是最关键的一步！

### 📝 详细步骤

#### 第一步：导入GitHub仓库

1. 登录Vercel后，在Dashboard页面
2. 点击页面上的 **"Add New..."** 按钮（通常在左上角或中间）
3. 在弹出的菜单中选择 **"Project"**
4. Vercel会显示你的GitHub仓库列表
5. 找到 `ppt-shop-manager` 仓库
6. 点击仓库旁边的 **"Import"** 按钮

#### 第二步：配置项目

Vercel会自动检测到这是一个Next.js项目，显示配置界面。

**Framework Preset**：
- 应该显示：**Next.js**
- 如果不是，手动选择Next.js

**Project Name**：
- 默认会使用仓库名：`ppt-shop-manager`
- 可以修改，建议保持默认
- 注意：这会成为你的网址的一部分

**Root Directory**：
- 应该显示：`./`
- 保持默认即可

#### 第三步：配置环境变量（⚠️ 非常重要！）

环境变量就是告诉Vercel你的数据库连接信息。

1. 在配置页面，找到 **Environment Variables** 部分
2. 点击 **+** 号添加第一个环境变量

**添加 DATABASE_URL**：

| 字段 | 值 |
|------|-----|
| **Key** | `DATABASE_URL` |
| **Value** | 粘贴你在第2步保存的Supabase连接字符串 |

**注意**：
- `Key`（变量名）必须完全一致：`DATABASE_URL`（区分大小写）
- `Value`（值）就是你在第2步保存的完整连接字符串
- 确保密码部分没有错误

3. 再次点击 **+** 号，添加第二个环境变量

**添加 NODE_ENV**：

| 字段 | 值 |
|------|-----|
| **Key** | `NODE_ENV` |
| **Value** | `production` |

**检查清单**：
- [ ] 已添加 `DATABASE_URL`
- [ ] 已添加 `NODE_ENV`
- [ ] 两个变量的值都正确

#### 第四步：开始部署

1. 检查所有配置是否正确
2. 向下滚动到页面底部
3. 点击 **"Deploy"** 按钮
4. 会进入部署页面，显示部署进度

#### 第五步：等待部署完成

**部署过程**：
1. Vercel会开始构建项目（Build）
2. 你会看到命令行输出，显示安装依赖、编译代码等信息
3. 整个过程大约需要 **1-3分钟**
4. 页面顶部会显示进度条

**部署成功的标志**：
- 页面顶部显示 **"Congratulations!"**
- 出现一个绿色的对勾 ✅
- 显示你的域名：`https://ppt-shop-manager.vercel.app`
- （或你的项目名.vercel.app）

#### 第六步：记录访问地址

**重要！记下以下信息**：

1. **应用访问地址**：
   - 示例：`https://ppt-shop-manager.vercel.app`
   - 这是你的系统访问网址，分享给团队成员使用

2. **Vercel项目地址**：
   - 示例：`https://vercel.com/your-username/ppt-shop-manager`
   - 用于管理你的部署项目

---

## 7. 初始化数据库

### 什么是初始化数据库？

就像创建一个新Excel表格，需要先定义有哪些列（姓名、年龄、地址等）。我们的系统也需要创建数据库表结构。

### 📝 详细步骤

#### 第一步：创建数据库表结构

1. 打开浏览器
2. 在地址栏输入你的Vercel访问地址，并在后面加上 `/api/db-init`
3. 例如：`https://ppt-shop-manager.vercel.app/api/db-init`
4. 按回车访问

**预期结果**：
- 页面会显示JSON格式的响应
- 应该看到：`{"success": true, "message": "数据库表结构初始化成功"}`
- 如果看到这个，说明数据库表创建成功！

**如果看到错误**：
- 检查地址是否正确
- 检查是否部署成功
- 查看浏览器控制台（F12）的错误信息

#### 第二步：插入测试数据

1. 在地址栏输入：`https://ppt-shop-manager.vercel.app/api/test-data`
2. 按回车访问

**预期结果**：
- 页面会显示JSON格式的响应
- 应该看到：`{"success": true, "message": "测试数据插入成功"}`
- 如果看到这个，说明测试数据插入成功！

**测试数据包括**：
- 4个测试账号（admin, manager, cs, designer）
- 4个测试员工
- 3个测试客户
- 3个测试订单
- 4条财务记录

---

## 8. 测试系统

### 📝 详细步骤

#### 第一步：访问系统首页

1. 在浏览器输入你的Vercel访问地址
2. 例如：`https://ppt-shop-manager.vercel.app`
3. 按回车访问

**预期结果**：
- 页面正常显示
- 可以看到登录界面
- 样式正常，没有乱码

#### 第二步：测试登录

使用以下测试账号登录：

**账号1：总台管理员**

| 字段 | 值 |
|------|-----|
| 用户名 | `admin` |
| 密码 | `admin123` |

**登录步骤**：
1. 在登录页面输入用户名：`admin`
2. 输入密码：`admin123`
3. 点击"登录"按钮
4. 应该能成功登录并进入管理界面

**账号2：管理者**

| 字段 | 值 |
|------|-----|
| 用户名 | `manager` |
| 密码 | `manager123` |

**账号3：客服**

| 字段 | 值 |
|------|-----|
| 用户名 | `cs` |
| 密码 | `cs123` |

**账号4：设计师**

| 字段 | 值 |
|------|-----|
| 用户名 | `designer` |
| 密码 | `designer123` |

#### 第三步：测试各个功能

**作为admin登录后**：
1. 查看左侧菜单，应该能看到：用户管理、订单管理、员工管理、客户管理、财务管理、统计报表
2. 点击各个菜单，查看是否能正常显示数据
3. 尝试查看订单列表、员工列表等

**作为designer登录后**：
1. 应该只能看到：我的订单、个人信息
2. 不能看到用户管理、财务管理等功能（权限控制）

---

## 9. 修改密码

### ⚠️ 非常重要！

测试账号的密码是公开的，部署成功后必须立即修改！

### 📝 详细步骤

#### 方法一：通过系统界面修改

1. 使用 `admin` 账号登录系统
2. 点击左侧菜单的"用户管理"
3. 在用户列表中找到需要修改的用户
4. 点击"编辑"或"修改密码"按钮
5. 输入新密码
6. 保存更改

**修改所有测试账号的密码**：
- admin：设置强密码
- manager：设置强密码
- cs：设置强密码
- designer：设置强密码

**密码建议**：
- 至少8位
- 包含大写字母、小写字母、数字
- 示例：`Admin@2024`、`Manager#123`

---

## 10. 分享给团队

### 📝 详细步骤

#### 第一步：创建团队成员账号

1. 使用 `admin` 账号登录
2. 进入"用户管理"
3. 点击"添加用户"按钮
4. 填写用户信息：
   - 用户名：建议使用真实姓名拼音，如 `zhangsan`
   - 密码：设置初始密码
   - 角色：选择相应角色（manager、cs、designer）
5. 保存

#### 第二步：分享访问地址

将以下信息分享给团队成员：

**访问地址**：
```
https://ppt-shop-manager.vercel.app
```

**账号信息**：
- 用户名：（你创建的用户名）
- 密码：（你设置的密码）

**使用说明**：
1. 在浏览器打开访问地址
2. 使用分配的账号和密码登录
3. 根据角色权限使用相应功能

#### 第三步：培训团队成员

建议给团队成员提供简单的使用培训：

**客服**：
- 如何查看客户信息
- 如何创建新订单
- 如何跟踪订单状态

**设计师**：
- 如何查看分配的订单
- 如何更新订单状态
- 如何上传设计文件

**管理者**：
- 如何查看订单统计
- 如何查看财务报表
- 如何分配订单

---

## 11. 完成！

### 🎉 恭喜你完成部署！

现在，你的PPT店铺管理系统已经成功部署到公网了！

### ✅ 你现在可以做什么：

1. **分享网址给团队成员**
   - 访问地址：`https://你的项目名.vercel.app`
   - 让设计师、员工、客服都可以访问

2. **随时随地访问系统**
   - 只要有网络，任何设备都可以访问
   - 不受地域限制

3. **创建真实账号**
   - 删除测试账号
   - 为团队成员创建真实账号
   - 分配合适的角色和权限

4. **开始使用系统**
   - 管理订单
   - 跟踪进度
   - 统计财务
   - 管理员工

### 📊 系统架构

```
┌─────────────────┐         ┌─────────────────┐         ┌─────────────────┐
│   用户浏览器     │  HTTPS  │    Vercel CDN   │  HTTPS  │   Supabase DB   │
│  (员工/客户)     │ ──────> │   (Next.js应用)  │ ──────> │  (PostgreSQL)    │
└─────────────────┘         └─────────────────┘         └─────────────────┘
```

### 🔑 测试账号信息

| 角色 | 用户名 | 密码 | 主要功能 |
|------|--------|------|----------|
| 总台管理员 | admin | admin123 | 所有功能 |
| 管理者 | manager | manager123 | 订单、财务管理 |
| 客服 | cs | cs123 | 客户、订单跟踪 |
| 设计师 | designer | designer123 | 订单设计 |

⚠️ **请立即修改所有默认密码！**

### 💰 成本说明

**完全免费**：
- Vercel免费套餐：100GB带宽/月
- Supabase免费套餐：500MB存储 + 50K请求/月
- **总计：¥0/月** 🎉

### 🔧 更新代码

当你修改代码后，只需：

```bash
git add .
git commit -m "Update: 描述更新内容"
git push
```

Vercel会自动检测并重新部署，无需手动操作！

### 📚 文档导航

- **新手指南**：[新手完全指南.md](./新手完全指南.md)
- **快速部署**：[快速部署指南.md](./快速部署指南.md)
- **常见问题**：[常见问题解决方案.md](./常见问题解决方案.md)
- **连接字符串**：[如何找到Supabase连接字符串.md](./如何找到Supabase连接字符串.md)
- **推送代码**：[最简单的推送代码方法.md](./最简单的推送代码方法.md)

---

## 🆘 需要帮助？

如果遇到问题，可以：

1. **查看文档**：
   - [常见问题解决方案.md](./常见问题解决方案.md)
   - [新手完全指南.md](./新手完全指南.md)

2. **检查清单**：
   - [部署检查清单.md](./部署检查清单.md)

3. **快速参考**：
   - [快速参考.md](./快速参考.md)

---

**祝你使用愉快！如有问题，请耐心排查，大多数问题都有解决方案。** 🚀
