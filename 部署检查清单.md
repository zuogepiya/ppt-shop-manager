# PPT店铺管理系统 - Vercel + Supabase 部署检查清单

使用此清单确保部署过程顺利完成。建议按顺序完成每一步。

---

## 准备阶段

- [ ] 确认拥有GitHub账号
- [ ] 确认拥有邮箱账号
- [ ] 确认本地已安装Git工具
- [ ] 确认项目代码完整无错误

---

## Supabase 数据库配置

- [ ] 注册Supabase账号
- [ ] 创建新项目 `ppt-shop-manager`
- [ ] 设置强数据库密码（⚠️ 务必保存密码）
- [ ] 选择合适区域（如：Northeast Asia）
- [ ] 等待项目创建完成
- [ ] 获取数据库连接字符串
- [ ] 替换连接字符串中的 `[YOUR-PASSWORD]`
- [ ] 复制完整的连接字符串（妥善保存）

**连接字符串示例**：
```
postgresql://postgres.abc123:MyStrongPassword123@aws-0-ap-northeast-1.pooler.supabase.com:6543/postgres
```

---

## GitHub 仓库配置

- [ ] 初始化本地Git仓库：`git init`
- [ ] 添加所有文件：`git add .`
- [ ] 提交代码：`git commit -m "Initial commit"`
- [ ] 在GitHub创建新仓库 `ppt-shop-manager`
- [ ] 添加远程仓库：`git remote add origin https://github.com/YOUR_USERNAME/ppt-shop-manager.git`
- [ ] 推送代码：`git push -u origin main`

---

## Vercel 部署配置

### 账号与导入

- [ ] 注册Vercel账号（推荐使用GitHub登录）
- [ ] 进入Dashboard，点击 "Add New..." > "Project"
- [ ] 导入GitHub仓库 `ppt-shop-manager`
- [ ] 确认Framework为Next.js
- [ ] 确认Root Directory为 `./`

### 环境变量配置（关键）

- [ ] 添加环境变量 `DATABASE_URL`，值为Supabase连接字符串
- [ ] 添加环境变量 `NODE_ENV`，值为 `production`
- [ ] 确认两个环境变量都已添加

**环境变量检查表**：

| 变量名 | 值 | 已添加 |
|--------|-----|--------|
| `DATABASE_URL` | Supabase连接字符串 | [ ] |
| `NODE_ENV` | `production` | [ ] |

### 部署

- [ ] 检查所有配置无误
- [ ] 点击 "Deploy" 按钮
- [ ] 等待部署完成（1-2分钟）
- [ ] 确认部署成功（显示绿色勾号）
- [ ] 记录部署域名：`https://your-project-name.vercel.app`

---

## 数据库初始化

### 表结构创建

- [ ] 访问：`https://your-project-name.vercel.app/api/db-init`
- [ ] 确认返回：`{"success": true, "message": "数据库表结构初始化成功"}`

### 测试数据插入

- [ ] 访问：`https://your-project-name.vercel.app/api/test-data`
- [ ] 确认返回：`{"success": true, "message": "测试数据插入成功"}`

---

## 功能测试

### 基本访问测试

- [ ] 访问首页：`https://your-project-name.vercel.app`
- [ ] 页面正常显示
- [ ] 无控制台错误

### 登录功能测试

测试各角色账号登录：

| 角色 | 用户名 | 密码 | 登录成功 |
|------|--------|------|----------|
| 总台管理员 | `admin` | `admin123` | [ ] |
| 管理者 | `manager` | `manager123` | [ ] |
| 客服 | `cs` | `cs123` | [ ] |
| 设计师 | `designer` | `designer123` | [ ] |

### 功能模块测试

**总台管理员**：
- [ ] 可以查看用户管理
- [ ] 可以查看财务统计
- [ ] 可以查看所有订单

**管理者**：
- [ ] 可以查看订单管理
- [ ] 可以查看财务管理
- [ ] 可以分配订单给设计师

**客服**：
- [ ] 可以查看客户列表
- [ ] 可以创建新订单
- [ ] 可以跟踪订单状态

**设计师**：
- [ ] 可以查看分配的订单
- [ ] 可以更新订单状态
- [ ] 可以上传设计文件

---

## 安全加固

- [ ] 修改 `admin` 账号密码
- [ ] 修改 `manager` 账号密码
- [ ] 修改 `cs` 账号密码
- [ ] 修改 `designer` 账号密码
- [ ] 确认所有默认密码已修改
- [ ] （可选）删除测试数据
- [ ] （可选）配置Supabase RLS

---

## 部署后验证

### 性能验证

- [ ] 首次加载时间 < 3秒
- [ ] 页面切换流畅
- [ ] API响应及时

### 兼容性验证

- [ ] Chrome浏览器正常
- [ ] Safari浏览器正常
- [ ] Edge浏览器正常
- [ ] 移动端访问正常

### 安全验证

- [ ] 使用HTTPS访问
- [ ] SSL证书有效
- [ ] 无安全警告

---

## 文档记录

记录以下信息，便于后续维护：

| 项目 | 值 |
|------|-----|
| **Vercel项目URL** | `https://vercel.com/your-username/ppt-shop-manager` |
| **应用访问URL** | `https://your-project-name.vercel.app` |
| **GitHub仓库** | `https://github.com/your-username/ppt-shop-manager` |
| **Supabase项目URL** | `https://supabase.com/dashboard/project/your-project-ref` |
| **Supabase连接字符串** | `postgresql://postgres.xxx:xxx@aws-0-ap-northeast-1.pooler.supabase.com:6543/postgres` |
| **数据库密码** | `****************`（保存到安全位置） |
| **部署日期** | `YYYY-MM-DD` |

---

## 常见问题排查

### 部署失败

- [ ] 检查Vercel部署日志
- [ ] 检查GitHub代码是否推送成功
- [ ] 检查环境变量配置
- [ ] 检查package.json脚本配置

### 数据库连接失败

- [ ] 检查DATABASE_URL是否正确
- [ ] 检查数据库密码是否正确
- [ ] 检查Supabase项目状态
- [ ] 查看Supabase连接日志

### 页面404

- [ ] 确认API路由存在
- [ ] 检查next.config.js配置
- [ ] 查看Vercel构建日志

### 登录失败

- [ ] 确认数据库已初始化
- [ ] 确认测试数据已插入
- [ ] 检查用户名密码是否正确
- [ ] 查看浏览器控制台错误

---

## 完成标志

✅ 部署成功的标志：

- [ ] Vercel显示绿色勾号
- [ ] 可以访问部署域名
- [ ] 登录页面正常显示
- [ ] 测试账号可以登录
- [ ] 各角色权限正常
- [ ] 数据库连接正常
- [ ] 无严重控制台错误

**全部完成！🎉**

---

## 后续维护建议

### 定期任务

- [ ] 每月备份数据库（Supabase自动备份）
- [ ] 定期更新依赖包：`pnpm update`
- [ ] 监控Vercel使用量
- [ ] 监控Supabase使用量

### 代码更新流程

```bash
# 1. 修改代码
# 2. 测试本地环境
# 3. 提交到GitHub
git add .
git commit -m "Update: 描述更新内容"
git push

# 4. Vercel自动部署
# 5. 验证新功能
```

### 应急处理

- [ ] 保存GitHub仓库访问地址
- [ ] 保存Vercel项目访问地址
- [ ] 保存Supabase项目访问地址
- [ ] 保存数据库密码（安全存储）

---

## 快速命令参考

### Git操作

```bash
# 查看状态
git status

# 提交代码
git add .
git commit -m "描述"
git push

# 查看日志
git log --oneline
```

### Vercel CLI（可选）

```bash
# 安装Vercel CLI
npm i -g vercel

# 登录
vercel login

# 部署
vercel --prod
```

### Supabase CLI（可选）

```bash
# 安装Supabase CLI
npm i -g supabase

# 登录
supabase login

# 链接项目
supabase link --project-ref your-project-ref
```

---

**祝部署顺利！如有问题，请查看【VERCEL_SUPABASE_部署指南.md】**
