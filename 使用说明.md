# PPT制作店铺员工管理系统 - 使用说明

## 系统概述

这是一个基于 Next.js 开发的 PPT 制作店铺员工管理系统，支持四种角色的独立管理端口：
- **总台管理**：全面管理员工、财务、订单
- **管理者**：审核订单、分配任务
- **客服**：沟通客户、跟进订单
- **设计师**：制作 PPT、更新进度

## 访问地址

系统已部署在沙箱环境中，访问地址：
- **主页**：http://localhost:5000

## 演示账号

系统已预置以下演示账号，可以直接使用：

| 角色 | 用户名 | 密码 | 功能权限 |
|------|--------|------|----------|
| 总台管理 | admin | admin123 | 全面管理系统所有功能 |
| 管理者 | manager | manager123 | 审核订单、分配任务、查看报表 |
| 客服 | cs | cs123 | 创建订单、跟进客户、更新订单状态 |
| 设计师 | designer | designer123 | 接收任务、更新制作进度、提交审核 |

## 系统功能

### 1. 总台管理（admin）
- **员工管理**：查看、添加、编辑、删除员工信息
- **订单管理**：查看所有订单、统计分析
- **财务管理**：查看财务记录、统计收支、导出报表

### 2. 管理者（manager）
- **订单审核**：审核新订单、分配设计师
- **任务分配**：将订单分配给合适的设计师
- **进度监控**：查看所有订单的制作进度
- **团队管理**：查看设计师工作量统计

### 3. 客服（cs）
- **客户管理**：创建客户档案、记录客户信息
- **订单创建**：为客户创建新订单
- **订单跟进**：更新订单状态、与客户沟通
- **快速操作**：快捷操作面板

### 4. 设计师（designer）
- **任务接收**：查看待接单任务、选择接单
- **进度更新**：更新制作进度、上传成果
- **提交审核**：完成后提交给管理者审核
- **收入统计**：查看自己的提成和收入

## 使用流程

### 新订单处理流程

1. **客服创建订单**
   - 登录系统（使用 cs/cs123）
   - 进入客服工作台
   - 点击"创建订单"
   - 填写客户信息、PPT需求、价格等
   - 提交订单

2. **管理者审核并分配**
   - 登录系统（使用 manager/manager123）
   - 进入管理者工作台
   - 查看待审核订单
   - 审核订单信息
   - 选择合适的设计师进行分配

3. **设计师接单并制作**
   - 登录系统（使用 designer/designer123）
   - 进入设计师工作台
   - 查看待接单任务
   - 点击"接单"开始制作
   - 定期更新制作进度
   - 完成后点击"提交审核"

4. **管理者最终审核**
   - 登录系统（使用 manager/manager123）
   - 查看待审核的成品
   - 通过审核后订单完成
   - 如有问题可驳回修改

5. **财务记录**
   - 系统自动记录订单收入
   - 自动计算客服提成和设计师费用
   - 总台管理可查看完整的财务报表

## 技术架构

- **前端框架**：Next.js 16 (App Router) + React 19
- **样式**：Tailwind CSS 4
- **数据库**：PostgreSQL + Drizzle ORM
- **语言**：TypeScript 5
- **认证**：基于 Cookie 的 Session 管理

## API 接口

系统提供以下 API 接口：

### 认证相关
- `POST /api/auth/login` - 用户登录
- `POST /api/auth/logout` - 用户登出
- `GET /api/auth/me` - 获取当前用户信息

### 员工管理
- `GET /api/employees` - 获取员工列表
- `POST /api/employees` - 创建员工
- `GET /api/employees/[id]` - 获取员工详情
- `PUT /api/employees/[id]` - 更新员工信息
- `DELETE /api/employees/[id]` - 删除员工

### 订单管理
- `GET /api/orders` - 获取订单列表
- `POST /api/orders` - 创建订单
- `GET /api/orders/[id]` - 获取订单详情
- `PUT /api/orders/[id]` - 更新订单信息
- `DELETE /api/orders/[id]` - 删除订单

### 财务管理
- `GET /api/financial` - 获取财务记录
- `POST /api/financial` - 创建财务记录
- `GET /api/financial/[id]` - 获取财务记录详情
- `PUT /api/financial/[id]` - 更新财务记录
- `DELETE /api/financial/[id]` - 删除财务记录
- `GET /api/financial/stats` - 获取财务统计

## 数据库初始化

如果需要重新初始化数据库，可以按以下步骤操作：

1. 创建数据库表结构：
   ```bash
   curl -X POST http://localhost:5000/api/db-init
   ```

2. 插入测试数据：
   ```bash
   curl -X POST http://localhost:5000/api/test-data
   ```

## 注意事项

1. 演示账号的密码是明文存储，生产环境需要使用加密方式
2. 系统使用 PostgreSQL 数据库，确保数据库服务正常运行
3. 默认端口为 5000，如有冲突需修改配置
4. 前端页面支持响应式设计，可在手机、平板、电脑上访问

## 联系支持

如有问题或需要帮助，请联系开发团队。
